(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66],{2332:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/test/test3",function(){return t(4961)}])},4961:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>K});var r=t(7876),o=t(4232),l=t(4826),n=t(9021),c=t(4188),s=t(5050),i=t(1210),d=t(3108),u=t(8845),m=t(4193),f=t(6301),h=t(5832),p=t(5804),b=t(8291),x=t(3752),k=t(6080),g=t(2068),v=t(2952),_=t(4736),j=t(7473),y=t(8926),C=t(6772),w=t(1190),E=t(1871),M=t(9300),S=t(1423),z=t(5435),O=t(2323),B=t(5165),T=t(4850),A=t(6279),U=t(2662),F=t(9939),P=t(9912),Y=t(7232),Z=t(5643),$=t(9556);l.E,l.E;let G={default:(0,r.jsx)(l.E,{styles:{label:{textShadow:"-1px -1px 0 black, 1px -1px 0 black, -1px  1px 0 black, 1px  1px 0 black"}},style:{border:"2px solid white"},miw:90,color:"gray",variant:"filled",children:"基本効果"}),enhance:(0,r.jsx)(l.E,{styles:{label:{textShadow:"-1px -1px 0 black, 1px -1px 0 black, -1px  1px 0 black, 1px  1px 0 black"}},style:{border:"2px solid white"},miw:90,color:"orange",variant:"filled",children:"エンハンス"}),evolve:(0,r.jsx)(l.E,{styles:{label:{textShadow:"-1px -1px 0 black, 1px -1px 0 black, -1px  1px 0 black, 1px  1px 0 black"}},style:{border:"2px solid white"},miw:90,color:"yellow",variant:"filled",children:"進化"}),super_evolve:(0,r.jsx)(l.E,{styles:{label:{textShadow:"-1px -1px 0 black, 1px -1px 0 black, -1px  1px 0 black, 1px  1px 0 black"}},style:{border:"2px solid white"},miw:90,color:"violet",variant:"filled",children:"超進化"}),necromancy:(0,r.jsx)(l.E,{styles:{label:{textShadow:"-1px -1px 0 black, 1px -1px 0 black, -1px  1px 0 black, 1px  1px 0 black"}},style:{border:"2px solid white"},miw:90,color:"grape",variant:"filled",children:"ネクロマンス"}),awakening:(0,r.jsx)(l.E,{styles:{label:{textShadow:"-1px -1px 0 black, 1px -1px 0 black, -1px  1px 0 black, 1px  1px 0 black"}},style:{border:"2px solid white"},miw:90,color:"red",variant:"filled",children:"覚醒"})},N={critical:"red",high:"orange",medium:"yellow",low:"blue"},L={critical:"最重要",high:"重要",medium:"注意",low:"軽微"},W=[{id:"royal1",name:"勇猛のルミナスランサー",type:"follower",leader:"royal",baseCost:2,attack:1,toughness:2,effects:[{mode:"default",cost:2,conditions:{},effect:"ナイト1枚を自分の場に出す。<br> 自分の兵士・フォロワーが場に出たとき、それは【突進】を持つ"}],imageUrl:"/svwb_utilities/img/1/royal/勇猛のルミナスランサー.png"},{id:"royal2",name:"異端の侍",type:"follower",leader:"royal",baseCost:2,attack:2,toughness:1,effects:[{mode:"default",cost:2,conditions:{},effect:"超進化可能ターンなら、これは【必殺】を持つ<br>【突進】"}],imageUrl:"/svwb_utilities/img/1/royal/異端の侍.png"},{id:"royal3",name:"刹那のクイックブレイダー",type:"follower",leader:"royal",baseCost:1,attack:1,toughness:1,effects:[{mode:"default",cost:1,conditions:{},effect:"【疾走】"}],imageUrl:"/svwb_utilities/img/1/royal/刹那のクイックブレイダー.png"},{id:"royal4",name:"ミリタリードッグ",type:"follower",leader:"royal",baseCost:3,attack:4,toughness:2,effects:[{mode:"default",cost:3,conditions:{},effect:"突進"},{mode:"enhance",cost:6,conditions:{},effect:"【6コスト】ミリタリードッグ2枚を自分の場に出す"}],imageUrl:"/svwb_utilities/img/1/royal/ミリタリードッグ.png"},{id:"royal5",name:"サイレントスナイパー・ワルツ",type:"follower",leader:"royal",baseCost:3,attack:2,toughness:1,effects:[{mode:"default",cost:3,conditions:{},effect:"相手の場のフォロワー1枚を選ぶ。それに5ダメージ"},{mode:"enhance",cost:6,conditions:{},effect:"【6コスト】これは+2/+2して【潜伏】を持つ"}],imageUrl:"/svwb_utilities/img/1/royal/サイレントスナイパー・ワルツ.png"},{id:"royal6",name:"レヴィオンの迅雷・アルベール",type:"follower",leader:"royal",baseCost:5,attack:3,toughness:5,effects:[{mode:"default",cost:5,conditions:{},effect:"【疾走】"},{mode:"enhance",cost:9,conditions:{},effect:"【9コスト】相手の場のフォロワーすべてに3ダメージ。これは「1ターンに2回攻撃できる。」をもつ"}],imageUrl:"/svwb_utilities/img/1/royal/レヴィオンの迅雷・アルベール.png"},{id:"royal7",name:"レヴィオンアックス・ジェノ",type:"follower",leader:"royal",baseCost:7,attack:7,toughness:6,effects:[{mode:"default",cost:7,conditions:{},effect:"【突進】<br>1ターンに2回攻撃できる。<br>【攻撃時】これは【バリア】を持つ。ナイト1枚を自分の場に出す"}],imageUrl:"/svwb_utilities/img/1/royal/レヴィオンアックス・ジェノ.png"},{id:"royal8",name:"テンタクルバイト",type:"spell",leader:"royal",baseCost:7,effects:[{mode:"default",cost:7,conditions:{},effect:"相手の場のフォロワー1枚か相手のリーダーを選ぶ。それに5ダメージ。自分のリーダーを5回復"}],imageUrl:"/svwb_utilities/img/1/royal/テンタクルバイト.png"},{id:"royal9",name:"ケンタウロスの騎士",type:"follower",leader:"royal",baseCost:8,attack:7,toughness:5,effects:[{mode:"default",cost:8,conditions:{},effect:"【疾走】"}],imageUrl:"/svwb_utilities/img/1/royal/ケンタウロスの騎士.png"},{id:"royal10",name:"煌刃の勇者・アマリア",type:"follower",leader:"royal",baseCost:8,attack:6,toughness:6,effects:[{mode:"default",cost:8,conditions:{},effect:"スティールナイト(2/2)4枚を自分の場に出す。<br>自分の他のフォロワーが場に出たとき、それは+1/+0して【突進】と【守護】を持つ。"}],imageUrl:"/svwb_utilities/img/1/royal/煌刃の勇者・アマリア.png"},{id:"royal11",name:"剣士の斬撃",type:"spell",leader:"royal",baseCost:4,effects:[{mode:"default",cost:8,conditions:{},effect:"相手の場のフォロワー1枚を選ぶ。それを破壊。『スティールナイト』1枚を自分の場に出す。s"}],imageUrl:"/svwb_utilities/img/1/royal/剣士の斬撃.png"},{id:"neutral1",name:"楽朗の天宮・フィルドア",type:"follower",leader:"neutral",baseCost:2,attack:2,toughness:2,effects:[{mode:"evolve",cost:0,conditions:{evolveTokenMin:1},effect:"相手の場のフォロワー1枚を選ぶ。それを破壊"}],imageUrl:"/svwb_utilities/img/1/neutral/楽朗の天宮・フィルドア.png"},{id:"neutral2",name:"迸る巧妙・アポロン",type:"follower",leader:"neutral",baseCost:3,attack:1,toughness:2,effects:[{mode:"default",cost:3,conditions:{},effect:"敵全体に1ダメージ"},{mode:"evolve",cost:0,conditions:{evolveTokenMin:1},effect:"敵全体に1ダメージ"}],imageUrl:"/svwb_utilities/img/1/neutral/迸る巧妙・アポロン.png"},{id:"neutral3",name:"神の雷霆",type:"spell",leader:"neutral",baseCost:4,effects:[{mode:"default",cost:5,conditions:{},effect:"相手の場の攻撃力最大のフォロワーからランダムに1枚を破壊。相手の場のフォロワーすべてに1ダメージ"}],imageUrl:"/svwb_utilities/img/1/neutral/神の雷霆.png"},{id:"neutral5",name:"勇壮の堕天使・オリヴィエ",type:"follower",leader:"neutral",baseCost:7,attack:4,toughness:4,effects:[{mode:"default",cost:7,conditions:{},effect:"自分のデッキから2枚引く。自分のリーダーを2回復。自分のPPを2回復"},{mode:"super_evolve",cost:0,conditions:{evolveTokenMin:1},effect:"自分の場の他の進化前野フォロワーを1枚選ぶ。それは超進化する"}],imageUrl:"/svwb_utilities/img/1/neutral/勇壮の堕天使・オリヴィエ.png"},{id:"orivie",name:"オリヴィエ",type:"follower",leader:"witch",baseCost:3,attack:2,toughness:3,effects:[{mode:"default",cost:3,conditions:{},effect:"敵1体に3ダメージ"},{mode:"enhance",cost:6,conditions:{},effect:"敵全体に3ダメージ（エンハンス）"},{mode:"evolve",cost:0,conditions:{evolveTokenMin:1},effect:"進化時：他フォロワー進化"},{mode:"super_evolve",cost:0,conditions:{superEvolveTokenMin:1},effect:"超進化時：他フォロワー超進化"}],imageUrl:"https://placehold.co/100x150/000000/FFFFFF?text=オリヴィエ"}],D={dragon:[{turn:4,move:"ドラゴンナイト召喚 + PP加速",threat:"high"},{turn:6,move:"大型フォロワー展開",threat:"critical"},{turn:7,move:"覚醒能力発動 + 全体除去",threat:"critical"},{turn:8,move:"バハムート級の切り札",threat:"critical"}],witch:[{turn:3,move:"スペルブースト蓄積",threat:"medium"},{turn:5,move:"知恵の光 + 手札補充",threat:"high"},{turn:7,move:"超越コンボ開始",threat:"critical"}],bishop:[{turn:4,move:"治癒の祈り + 回復",threat:"low"},{turn:6,move:"テミスの審判",threat:"high"},{turn:8,move:"セラフ召喚",threat:"critical"}],nightmare:[{turn:3,move:"スケルトン召喚 + 墓地肥やし",threat:"medium"},{turn:5,move:"ファントムハウル + 墓地消費",threat:"high"},{turn:7,move:"モルディカイ降臨",threat:"critical"}]},I=[{value:"elf",label:"エルフ"},{value:"royal",label:"ロイヤル"},{value:"witch",label:"ウィッチ"},{value:"dragon",label:"ドラゴン"},{value:"nightmare",label:"ナイトメア"},{value:"bishop",label:"ビショップ"},{value:"nemesis",label:"ネメシス"}],H=[{id:"puppet",name:"操り人形",cost:1,attack:1,defense:1,effect:"効果：なし",category:"puppet"},{id:"enhanced_puppet",name:"強化型操り人形",cost:1,attack:2,defense:2,effect:"効果：なし",category:"puppet"},{id:"past_core",name:"パスト・コア",cost:1,attack:1,defense:1,effect:"1コストのアーティファクトと合成した時にキャッスルアーティファクトに変身する",category:"core"},{id:"future_core",name:"フューチャー・コア",cost:1,attack:1,defense:1,effect:"1コストのアーティファクトと合成した時にアタックアーティファクトに変身する",category:"core"},{id:"castle_artifact",name:"キャッスルアーティファクト",cost:3,attack:null,defense:null,effect:"これに【融合】したカードのコストの合計によって変身する。",category:"intermediate_artifact"},{id:"attack_artifact",name:"アタックアーティファクト",cost:3,attack:null,defense:null,effect:"これに【融合】したカードのコストの合計によって変身する。",category:"intermediate_artifact"},{id:"destroy_artifact_alpha",name:"デストロイアーティファクトα",cost:5,attack:null,defense:null,effect:"『デストロイアーティファクトβ』や『デストロイアーティファクトγ』をそれぞれこれに【融合】したとき、『イクシードアーティファクトΩ』に変身する。",category:"destroy_artifact"},{id:"destroy_artifact_beta",name:"デストロイアーティファクトβ",cost:5,attack:null,defense:null,effect:"効果：なし",category:"destroy_artifact"},{id:"destroy_artifact_gamma",name:"デストロイアーティファクトγ",cost:5,attack:null,defense:null,effect:"効果：なし",category:"destroy_artifact"},{id:"exceed_artifact_omega",cost:10,name:"イクシードアーティファクトΩ",attack:null,defense:null,effect:"効果：なし",category:"final_artifact"}];function J(e,a){let t=e.conditions||{};return"necromancy_modifier"===e.mode?void 0!==t.necromancyCost&&a.graveyardCount>=t.necromancyCost:"awakening_modifier"===e.mode?void 0!==a.ppMax&&a.ppMax>=7:(void 0===t.minTurn||!(a.turn<t.minTurn))&&(void 0===t.minPP||!(a.pp<t.minPP))&&(void 0===t.evolveTokenMin&&void 0===t.superEvolveTokenMin||!a.evolveUsedThisTurn)&&(void 0===t.evolveTokenMin||!(a.ep<t.evolveTokenMin))&&(void 0===t.superEvolveTokenMin||!(a.sep<t.superEvolveTokenMin))&&("evolve"!==e.mode||!!a.isEpUsable)&&("super_evolve"!==e.mode||!!a.isSepUsable)&&e.cost<=a.pp}function R(e){let{value:a,max:t,onChange:o,label:l,disabled:u=!1,knownCount:m=0,knownColor:f="green"}=e;return(0,r.jsxs)(n.B,{gap:4,children:[(0,r.jsxs)(c.Y,{justify:"space-between",wrap:"nowrap",children:[(0,r.jsx)(s.E,{size:"sm",c:u?"dark.3":"blue.3",children:l}),(0,r.jsx)(s.E,{size:"sm",c:u?"dark.4":"blue.4",children:"".concat(a," / ").concat(t)})]}),(0,r.jsx)(c.Y,{gap:6,children:Array.from({length:t},(e,t)=>{let l=t<m,n=t<a,c="dark";return l?c=f:n&&(c="blue"),(0,r.jsx)(i.M,{radius:"xl",variant:"light",disabled:u,color:c,size:(0,d.D)(32),onClick:()=>{let e=t+1;o(e===a?0:e)},style:{backgroundColor:c===f?"var(--mantine-color-".concat(f,"-9)"):"blue"===c?"var(--mantine-color-blue-9)":"var(--mantine-color-dark-6)",border:"1px solid ".concat(c===f?"var(--mantine-color-".concat(f,"-7)"):"blue"===c?"var(--mantine-color-blue-7)":"var(--mantine-color-dark-4)"),...u&&{backgroundColor:"var(--mantine-color-dark-9)",border:"1px solid var(--mantine-color-dark-7)",color:"var(--mantine-color-dark-5)"}},children:n?(0,r.jsx)(M.A,{size:20}):(0,r.jsx)(S.A,{size:20})},t)})})]})}function X(e){let{card:a,ppCurrent:t,ppMax:l,onUseCard:i,actionableEffect:d}=e,[g,v]=(0,o.useState)(!1),_=!d,j=(0,o.useMemo)(()=>{if(!d)return(0,r.jsx)(s.E,{size:"sm",c:"white",children:"現在使用可能な効果はありません。"});let e=a.availableEffects.filter(e=>e.effect).map((e,a)=>(0,r.jsxs)(c.Y,{wrap:"nowrap",align:"center",gap:"xs",children:[e.mode.endsWith("_modifier")?G[e.mode.replace("_modifier","")]:G[e.mode],(0,r.jsx)(s.E,{size:"sm",c:"white",dangerouslySetInnerHTML:{__html:e.effect.replace(/\n/g,"<br/>")}})]},a));return e.length>0?(0,r.jsx)(n.B,{gap:4,children:e}):(0,r.jsx)(s.E,{size:"sm",c:"white",children:"効果なし"})},[d,a.availableEffects]),y=(0,o.useMemo)(()=>{if(!d)return(0,r.jsx)(r.Fragment,{});let e=a.availableEffects.filter(e=>"default"!=e.mode).map((e,a)=>(0,r.jsx)(r.Fragment,{children:e.mode.endsWith("_modifier")?G[e.mode.replace("_modifier","")]:G[e.mode]}));return e.length>0?(0,r.jsx)(n.B,{gap:"xs",style:{position:"absolute",top:50,right:-8},children:e}):(0,r.jsx)(r.Fragment,{})},[d,a.availableEffects]);return(0,r.jsxs)(u.Z,{shadow:"sm",style:{backgroundColor:"var(--mantine-color-dark-7)"},children:[(0,r.jsx)(c.Y,{justify:"space-between",align:"flex-start",wrap:"nowrap",children:(0,r.jsxs)(n.B,{gap:"xs",align:"stretch",children:[(0,r.jsx)(m.$,{size:"compact-xs",variant:"filled",color:"blue",onClick:()=>d&&i(a,d),disabled:_,styles:{root:{"&[data-disabled]":{backgroundColor:"var(--mantine-color-dark-9) !important",color:"var(--mantine-color-dark-5) !important",cursor:"not-allowed"}}},children:"使用"}),(0,r.jsxs)(f.j,{width:400,shadow:"md",openDelay:200,closeDelay:400,position:"bottom",offset:10,withArrow:!0,styles:{dropdown:{backgroundColor:"var(--mantine-color-dark-5)",borderColor:"var(--mantine-color-blue-7)",borderWidth:1,borderStyle:"solid"}},children:[(0,r.jsx)(f.j.Target,{children:(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)(h._,{src:a.imageUrl,alt:a.name,width:150,height:225,radius:"md",style:{cursor:"pointer",border:"2px solid var(--mantine-color-blue-6)"},onClick:()=>v(!0),fallbackSrc:"https://placehold.co/100x150/FF0000/FFFFFF?text=No+Image"}),y]})}),(0,r.jsx)(f.j.Dropdown,{children:j})]})]})}),(0,r.jsx)(p.a,{opened:g,size:"xl",onClose:()=>v(!1),title:(0,r.jsxs)(c.Y,{justify:"space-between",children:[(0,r.jsxs)(b.h,{order:3,c:"blue.3",children:[a.name," - 全能力"]}),(0,r.jsx)(m.$,{size:"compact-xs",variant:"filled",color:"blue",onClick:()=>d&&i(a,d),disabled:_,styles:{root:{"&[data-disabled]":{backgroundColor:"var(--mantine-color-dark-9) !important",color:"var(--mantine-color-dark-5) !important",cursor:"not-allowed"}}},children:"使用"})]}),centered:!0,overlayProps:{backgroundOpacity:.55,blur:3},styles:{content:{backgroundColor:"var(--mantine-color-dark-8)",borderColor:"var(--mantine-color-blue-9)"},header:{backgroundColor:"var(--mantine-color-dark-8)",borderBottom:"1px solid var(--mantine-color-dark-6)"},title:{color:"var(--mantine-color-blue-3)"},close:{color:"var(--mantine-color-blue-3)"}},children:(0,r.jsx)(x.m,{size:"lg",children:(0,r.jsxs)(k.x,{children:[(0,r.jsx)(k.x.Col,{span:"content",children:(0,r.jsx)(h._,{src:a.imageUrl,alt:a.name,width:100,height:150,radius:"md",style:{cursor:"pointer",border:"2px solid var(--mantine-color-blue-6)"},onClick:()=>v(!0),fallbackSrc:"https://placehold.co/100x150/FF0000/FFFFFF?text=No+Image"})}),(0,r.jsx)(k.x.Col,{span:"auto",children:(0,r.jsx)(n.B,{gap:"xs",children:a.effects.map((e,a)=>(0,r.jsxs)(c.Y,{mt:"xs",wrap:"nowrap",align:"flex-start",children:[e.mode.endsWith("_modifier")?G[e.mode.replace("_modifier","")]:G[e.mode],(0,r.jsx)(s.E,{size:"sm",c:"white",dangerouslySetInnerHTML:{__html:e.effect.replace(/\n/g,"<br/>")}})]},"modal-effect-".concat(a)))})})]})})})]})}function Q(e){let{threat:a}=e;return(0,r.jsx)(l.E,{color:N[a],variant:"light",children:(0,r.jsx)(s.E,{color:"white",children:L[a]})})}function V(e){let{token:a,count:t,handleArtifactCountChange:l,handCount:d}=e,[m,f]=(0,o.useState)(!1);return(0,r.jsxs)(u.Z,{withBorder:!0,style:{backgroundColor:"var(--mantine-color-dark-7)"},children:[(0,r.jsxs)(c.Y,{justify:"space-between",wrap:"nowrap",children:[(0,r.jsxs)(c.Y,{children:[(0,r.jsx)(s.E,{size:"sm",c:"blue.4",children:a.name}),(0,r.jsxs)(s.E,{size:"lg",fw:"bold",c:"cyan.1",children:[t,"枚"]}),(0,r.jsx)(i.M,{variant:"filled",color:"blue",size:"sm",onClick:()=>l(a.id,1),disabled:d>=9,children:(0,r.jsx)(z.A,{size:16})}),(0,r.jsx)(i.M,{variant:"filled",color:"red",size:"sm",onClick:()=>l(a.id,-1),disabled:t<=0,children:(0,r.jsx)(O.A,{size:16})})]}),(0,r.jsx)(i.M,{variant:"filled",onClick:()=>f(e=>!e),color:"blue",size:"md",children:m?(0,r.jsx)(B.A,{size:20}):(0,r.jsx)(T.A,{size:20})})]}),(0,r.jsx)(g.S,{in:m,children:(0,r.jsx)(n.B,{gap:"xs",mt:"md",style:{borderTop:"1px solid var(--mantine-color-dark-5)",paddingTop:"10px"},children:(0,r.jsxs)(s.E,{size:"xs",c:"blue.1",children:["コスト: ",a.cost,null!==a.attack&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),"攻撃力: ",a.attack]}),null!==a.defense&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),"体力: ",a.defense]}),a.effect&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),"効果: ",a.effect]})]})})})]})}function q(e){let{value:a,onChange:t,label:o,min:l=0,max:d=1/0}=e;return(0,r.jsx)(u.Z,{withBorder:!0,padding:"md",style:{backgroundColor:"var(--mantine-color-dark-7)"},children:(0,r.jsxs)(n.B,{gap:4,children:[(0,r.jsx)(s.E,{size:"sm",c:"blue.3",children:o}),(0,r.jsxs)(c.Y,{justify:"space-between",wrap:"nowrap",children:[(0,r.jsx)(i.M,{variant:"light",color:"red",size:"lg",onClick:()=>t(Math.max(l,a-1)),disabled:a<=l,children:(0,r.jsx)(O.A,{size:20})}),(0,r.jsx)(v.Q,{value:a,onChange:e=>{"number"==typeof e&&t(Math.min(d,Math.max(l,e)))},min:l,max:d,hideControls:!0,styles:{input:{textAlign:"center",backgroundColor:"var(--mantine-color-dark-6)",color:"var(--mantine-color-blue-1)",border:"1px solid var(--mantine-color-dark-4)"}},maw:100}),(0,r.jsx)(i.M,{variant:"light",color:"blue",size:"lg",onClick:()=>t(Math.min(d,a+1)),disabled:a>=d,children:(0,r.jsx)(z.A,{size:20})})]})]})})}function K(){var e;let[a,t]=(0,o.useState)(1),[d,f]=(0,o.useState)(1),[h,x]=(0,o.useState)(0),[v,M]=(0,o.useState)(0),[S,z]=(0,o.useState)(1),[O,N]=(0,o.useState)(2),[L,K]=(0,o.useState)(2),[ee,ea]=(0,o.useState)("first"),[et,er]=(0,o.useState)(!1),[eo,el]=(0,o.useState)(!1),[en,ec]=(0,o.useState)(4),[es,ei]=(0,o.useState)(null),[ed,eu]=(0,o.useState)(0),[em,ef]=(0,o.useState)(!1),[eh,ep]=(0,o.useState)(0),[eb,ex]=(0,o.useState)(0),[ek,eg]=(0,o.useState)(0),[ev,e_]=(0,o.useState)(0),[ej,ey]=(0,o.useState)(0),[eC,ew]=(0,o.useState)(0),[eE,eM]=(0,o.useState)(0),[eS,ez]=(0,o.useState)(0),[eO,eB]=(0,o.useState)(0),[eT,eA]=(0,o.useState)(0),[eU,eF]=(0,o.useState)(0),[eP,eY]=(0,o.useState)(!1),[eZ,e$]=(0,o.useState)(!1),[eG,eN]=(0,o.useState)(!1),[eL,eW]=(0,o.useState)(!1),[eD,eI]=(0,o.useState)(!1),[eH,eJ]=(0,o.useState)(!1),[eR,eX]=(0,o.useState)(!1),[eQ,eV]=(0,o.useState)(!1),[eq,eK]=(0,o.useState)(!1),[e0,e1]=(0,o.useState)(!1),[e2,e3]=(0,o.useState)(""),[e6,e5]=(0,o.useState)([]),[e4,e7]=(0,o.useState)(!1),[e9,e8]=(0,o.useState)(!1),[ae,aa]=(0,o.useState)(null),[at,ar]=(0,o.useState)({}),[ao,al]=(0,o.useState)(""),an=(0,o.useCallback)(()=>{t(1),f(1),x(0),M(0),z(1),N(2),K(2),ea("first"),er(!1),el(!1),ec(4),eu(0),ep(0),ex(0),eg(0),e_(0),ey(0),ew(0),eM(0),ez(0),eB(0),eA(0),eF(0),e3(""),e5([]),al("")},[]);(0,o.useEffect)(()=>{e7(!0)},[]);let ac=(0,o.useMemo)(()=>"first"===ee&&a>=5||"second"===ee&&a>=4,[ee,a]),as=(0,o.useMemo)(()=>"first"===ee&&a>=7||"second"===ee&&a>=6,[ee,a]),ai=(0,o.useMemo)(()=>{let e=Math.min(10,a),t=Math.min(h,10-e);return Math.min(10,e+t)+v},[a,h,v]),ad=(0,o.useMemo)(()=>0===en||null===es?[]:W.filter(e=>e.leader===es||"neutral"===e.leader).map(e=>{let t=function(e,a){let t=e.effects.find(e=>"enhance"===e.mode);if(t&&J(t,{turn:a.turn,pp:a.pp,ppMax:a.ppMax,ep:a.ep,sep:a.sep,graveyardCount:a.graveyardCount,cardEffects:e.effects,evolveUsedThisTurn:a.evolveUsedThisTurn,isEpUsable:a.isEpUsable,isSepUsable:a.isSepUsable}))return t;let r=e.effects.find(e=>"default"===e.mode);return r&&J(r,{turn:a.turn,pp:a.pp,ppMax:a.ppMax,ep:a.ep,sep:a.sep,graveyardCount:a.graveyardCount,cardEffects:e.effects,evolveUsedThisTurn:a.evolveUsedThisTurn,isEpUsable:a.isEpUsable,isSepUsable:a.isSepUsable})?r:null}(e,{turn:a,pp:S,ppMax:ai,ep:O,sep:L,graveyardCount:eh,evolveUsedThisTurn:eo,isEpUsable:ac,isSepUsable:as});if(!t)return null;let r=t.cost,o=[];return o.push(t),e.effects.forEach(r=>{if(r!==t&&J(r,{turn:a,pp:S,ppMax:ai,ep:O,sep:L,graveyardCount:eh,cardEffects:e.effects,evolveUsedThisTurn:eo,isEpUsable:ac,isSepUsable:as})){let e=r.mode.endsWith("_modifier")?r.mode.replace("_modifier",""):r.mode;o.push({...r,mode:e})}}),o.sort((e,a)=>{let t={enhance:1,default:2,awakening:3,necromancy:4,evolve:5,super_evolve:6};return(t[e.mode]||99)-(t[a.mode]||99)}),{...e,displayCost:r,actionableEffect:t,availableEffects:o}}).filter(e=>null!==e).sort((e,a)=>a.displayCost-e.displayCost),[es,a,S,ai,O,L,eh,eo,ac,as,en]),au=(0,o.useMemo)(()=>{var e;return null===es?[]:(null==(e=D[es])?void 0:e.filter(e=>e.turn<=a+2&&e.turn>=a))||[]},[es,a]),am=(0,o.useMemo)(()=>"elf"===es?ed:"nemesis"===es?(eb||0)+(ek||0)+(ev||0)+(ej||0)+(eC||0)+(eE||0)+(eS||0)+(eO||0)+(eT||0)+(eU||0):0,[es,ed,eb,ek,ev,ej,eC,eE,eS,eO,eT,eU]),af=(0,o.useCallback)(()=>{let e=a+1,r=Math.min(10,e),o=Math.min(h,10-r),l=0;"second"!==ee||et||(l=1);let n=Math.min(10,r+o)+l;e5(t=>[...t,{turn:a,action:"ターン".concat(e,"へ進行"),pp:S,hand:en}]),t(e),f(r),x(o),M(l),z(n),ec(e=>Math.min(e+1,9)),el(!1),er(!1),ep(e=>e+1),"elf"!==es&&eu(0),"nemesis"!==es&&(ex(0),eg(0),e_(0),ey(0),ew(0),eM(0),ez(0),eB(0),eA(0),eF(0))},[a,h,S,en,ee,et,es]),ah=(0,o.useCallback)(e=>{e!==a&&(el(!1),er(!1),N(2),K(2));let r=Math.min(10,e),o=Math.min(h,10-r),l=Math.min(10,r+o)+ +("second"===ee&&!et);t(e),f(r),x(o),M(+("second"===ee&&!et)),z(l),"elf"!==es&&eu(0),"nemesis"!==es&&(ex(0),eg(0),e_(0),ey(0),ew(0),eM(0),ez(0),eB(0),eA(0),eF(0))},[a,h,ee,et,es]),ap=(0,o.useCallback)((e,t)=>{let r=Math.max(0,S-t.cost),o=Math.max(0,en-1),l=eh,n=e.effects.find(e=>"necromancy_modifier"===e.mode);if(n&&J(n,{turn:a,pp:S,ppMax:ai,ep:O,sep:L,graveyardCount:eh,cardEffects:e.effects,evolveUsedThisTurn:eo,isEpUsable:ac,isSepUsable:as})){var c;l=Math.max(0,eh-((null==(c=n.conditions)?void 0:c.necromancyCost)||0))}else l=eh+1;z(r),ec(o),ep(l),e5(l=>[...l,{turn:a,action:"".concat(e.name," (").concat(G[t.mode].props.children,")使用"),pp:r,hand:o}]),"fairy_token"===e.id&&ed>0&&eu(e=>Math.max(0,e-1))},[S,en,eh,a,ed,ai]),ab=(0,o.useCallback)(()=>{x(e=>{let t=Math.min(10,a),r=Math.min(e+1,10-t),o=Math.min(10,t+r)+v;return S>o&&z(o),r})},[a,S,v]),ax=(0,o.useCallback)(()=>{x(e=>{let t=Math.max(0,e-1),r=Math.min(10,Math.min(10,a)+t)+v;return S>r&&z(r),t})},[a,S,v]),ak=(0,o.useCallback)(e=>{switch(e){case"puppet":return eb;case"enhanced_puppet":return ek;case"past_core":return ev;case"future_core":return ej;case"castle_artifact":return eC;case"attack_artifact":return eE;case"destroy_artifact_alpha":return eS;case"destroy_artifact_beta":return eO;case"destroy_artifact_gamma":return eT;case"exceed_artifact_omega":return eU;default:return 0}},[eb,ek,ev,ej,eC,eE,eS,eO,eT,eU]),ag=(0,o.useCallback)((e,a)=>{switch(e){case"puppet":ex(a);break;case"enhanced_puppet":eg(a);break;case"past_core":e_(a);break;case"future_core":ey(a);break;case"castle_artifact":ew(a);break;case"attack_artifact":eM(a);break;case"destroy_artifact_alpha":ez(a);break;case"destroy_artifact_beta":eB(a);break;case"destroy_artifact_gamma":eA(a);break;case"exceed_artifact_omega":eF(a)}},[]),av=(0,o.useCallback)((e,a)=>{let t=ak(e);ag(e,Math.max(0,t+a)),a<0&&t>0&&ec(e=>Math.max(0,e-1))},[ak,ag]);(0,o.useEffect)(()=>{ec(e=>Math.max(e,am))},[am]);let a_=(0,o.useCallback)((e,t)=>{var r,o,l,n,c,s;let i=!0,d="",u=null;for(let[a,t]of Object.entries(e))if(ak(a)<t){i=!1,al("".concat(null==(r=H.find(e=>e.id===a))?void 0:r.name,"が足りません。"));break}if(i){if("castle_artifact"===t){let a=2===(e.past_core||0)&&1===Object.keys(e).length,t=1===(e.past_core||0)&&1===(e.future_core||0)&&2===Object.keys(e).length;a||t?(u="castle_artifact",d=a?"パスト・コア2枚を合成しキャッスルアーティファクトを生成":"パスト・コアとフューチャー・コアを合成しキャッスルアーティファクトを生成"):(i=!1,al("キャッスルアーティファクトの合成条件を満たしていません (パスト・コア2枚、またはパスト・コアとフューチャー・コアが1枚ずつ必要です)。"))}else if("attack_artifact"===t){let a=2===(e.future_core||0)&&1===Object.keys(e).length,t=1===(e.past_core||0)&&1===(e.future_core||0)&&2===Object.keys(e).length;a||t?(u="attack_artifact",d=a?"フューチャー・コア2枚を合成しアタックアーティファクトを生成":"パスト・コアとフューチャー・コアを合成しアタックアーティファクトを生成"):(i=!1,al("アタックアーティファクトの合成条件を満たしていません (フューチャー・コア2枚、またはパスト・コアとフューチャー・コアが1枚ずつ必要です)。"))}else if("destroy_artifact_alpha"===t){let a=["castle_artifact","attack_artifact"],t=["puppet","enhanced_puppet","past_core","future_core"],r=Object.keys(e).find(t=>a.includes(t)&&1===(e[t]||0)),n=Object.keys(e).find(a=>t.includes(a)&&1===(e[a]||0));r&&n&&2===Object.keys(e).length?(u="destroy_artifact_alpha",d="".concat(null==(o=H.find(e=>e.id===r))?void 0:o.name,"と").concat(null==(l=H.find(e=>e.id===n))?void 0:l.name,"を合成しデストロイアーティファクトαを生成")):(i=!1,al("デストロイアーティファクトαの合成条件を満たしていません。"))}else if("destroy_artifact_beta"===t){let a=["castle_artifact","attack_artifact"],t=Object.keys(e).find(t=>a.includes(t)&&1===(e[t]||0)),r=0;for(let a of["puppet","enhanced_puppet","past_core","future_core"])r+=e[a]||0;t&&2===r&&Object.keys(e).length>=2?(u="destroy_artifact_beta",d="".concat(null==(n=H.find(e=>e.id===t))?void 0:n.name,"と1コストアーティファクト2枚を合成しデストロイアーティファクトβを生成")):(i=!1,al("デストロイアーティファクトβの合成条件を満たしていません。"))}else if("destroy_artifact_gamma"===t){let a=["castle_artifact","attack_artifact"],t=["castle_artifact","attack_artifact","destroy_artifact_alpha","destroy_artifact_beta","destroy_artifact_gamma"],r=Object.keys(e).find(t=>a.includes(t)&&1===(e[t]||0)),o=Object.keys(e).find(a=>a!==r&&t.includes(a)&&1===(e[a]||0));r&&o&&2===Object.keys(e).length?(u="destroy_artifact_gamma",d="".concat(null==(c=H.find(e=>e.id===r))?void 0:c.name,"と").concat(null==(s=H.find(e=>e.id===o))?void 0:s.name,"を合成しデストロイアーティファクトγを生成")):(i=!1,al("デストロイアーティファクトγの合成条件を満たしていません。"))}else"exceed_artifact_omega"===t&&(1===(e.destroy_artifact_alpha||0)&&1===(e.destroy_artifact_beta||0)&&1===(e.destroy_artifact_gamma||0)&&3===Object.keys(e).length?(u="exceed_artifact_omega",d="デストロイアーティファクトα、β、γを合成しイクシードアーティファクトΩを生成"):(i=!1,al("イクシードアーティファクトΩの合成条件を満たしていません (デストロイα、β、γがそれぞれ1枚ずつ必要です)。")));if(i&&u){let t=en;for(let[a,r]of Object.entries(e))ag(a,ak(a)-r),t-=r;ag(u,ak(u)+1),ec(t+=1),e5(e=>[...e,{turn:a,action:d,pp:S,hand:t}]),e8(!1),ar({}),al("")}}},[ak,ag,en,a,S]),aj=(0,o.useCallback)(e=>{if(aa(e),ar({}),al(""),"castle_artifact"===e){let e=ev>=2,a=ev>=1&&ej>=1;e&&!a?ar({past_core:2}):!e&&a&&ar({past_core:1,future_core:1})}else if("attack_artifact"===e){let e=ej>=2,a=ev>=1&&ej>=1;e&&!a?ar({future_core:2}):!e&&a&&ar({past_core:1,future_core:1})}else if(["destroy_artifact_alpha","destroy_artifact_beta","destroy_artifact_gamma"].includes(e)){let e=[];eC>0&&e.push("castle_artifact"),eE>0&&e.push("attack_artifact");let a={};1===e.length&&(a[e[0]]=1),ar(a)}else if("exceed_artifact_omega"===e){let a=eS||0,t=eO||0,r=eT||0;if(1===a&&1===t&&1===r)return void a_({destroy_artifact_alpha:1,destroy_artifact_beta:1,destroy_artifact_gamma:1},e);let o={};a>0&&(o.destroy_artifact_alpha=1),t>0&&(o.destroy_artifact_beta=1),r>0&&(o.destroy_artifact_gamma=1),ar(o)}e8(!0)},[ev,ej,eC,eE,eS,eO,eT,a_]),ay=(0,o.useCallback)(function(e,a){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];ar(r=>{let o={...r};return t?(["castle_artifact","attack_artifact","past_core_x2","future_core_x2","past_future_x1"].forEach(e=>{("past_core_x2"===e||"past_future_x1"===e)&&delete o.past_core,("future_core_x2"===e||"past_future_x1"===e)&&delete o.future_core,delete o[e]}),a&&("past_core_x2"===e?o.past_core=2:"future_core_x2"===e?o.future_core=2:"past_future_x1"===e?(o.past_core=1,o.future_core=1):o[e]=1)):a?o[e]=(o[e]||0)+1:(o[e]=(o[e]||0)-1,o[e]<=0&&delete o[e]),o})},[]),aC=(0,o.useMemo)(()=>{let e=[];return H.forEach(a=>{let t=ak(a.id);t>0&&e.push({...a,currentCount:t})}),e},[ak]),aw=(0,o.useCallback)(()=>{let e=aC.filter(e=>["puppet","enhanced_puppet","past_core","future_core"].includes(e.id)),a=[],t=[];if(e.forEach(e=>{for(let a=0;a<e.currentCount;a++)t.push(e.id)}),t.length<2)return[];for(let e=0;e<t.length;e++)for(let r=e+1;r<t.length;r++){let o=[t[e],t[r]].sort(),l=o.join("-"),n=o.map(e=>{var a;return null==(a=H.find(a=>a.id===e))?void 0:a.name}).join("と");a.push({id:l,materials:o,name:n})}return Array.from(new Set(a.map(e=>e.id))).map(e=>a.find(a=>a.id===e))},[aC]),aE=(0,o.useMemo)(()=>{let e=I.find(e=>e.value===es);return e?e.label:"リーダーを選択"},[es]);return(0,r.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f1419 0%, #1a2332 50%, #0d1117 100%)",color:"var(--mantine-color-blue-1)"},children:[(0,r.jsxs)(c.Y,{align:"flex-start",wrap:"nowrap",gap:"xl",p:"xl",children:[(0,r.jsx)(u.Z,{shadow:"xl",withBorder:!0,style:{minWidth:350,backgroundColor:"var(--mantine-color-dark-8)",borderColor:"var(--mantine-color-blue-9)"},children:(0,r.jsxs)(n.B,{gap:"lg",children:[(0,r.jsxs)(c.Y,{justify:"space-between",children:[" ",(0,r.jsxs)(c.Y,{children:[(0,r.jsx)(A.A,{size:24,color:"var(--mantine-color-blue-4)"}),(0,r.jsx)(b.h,{order:2,c:"blue.3",children:"対戦状況"})]}),(0,r.jsx)(i.M,{variant:"filled",color:"red",size:"lg",radius:"xl",onClick:an,title:"全ての情報をリセット",styles:{root:{"&:hover":{backgroundColor:"var(--mantine-color-red-7)"}}},children:(0,r.jsx)(U.A,{size:20})})]}),(0,r.jsxs)(u.Z,{withBorder:!0,p:"md",style:{backgroundColor:"var(--mantine-color-dark-7)"},children:[(0,r.jsx)(s.E,{size:"sm",c:"blue.4",mb:"xs",children:"リーダーと先後"}),(0,r.jsxs)(c.Y,{gap:"md",children:[(0,r.jsx)(u.Z,{withBorder:!0,p:"xs",onClick:()=>e7(!0),style:{cursor:"pointer",backgroundColor:"var(--mantine-color-dark-6)",borderColor:"var(--mantine-color-blue-7)",flexGrow:1},children:(0,r.jsxs)(c.Y,{gap:"xs",justify:"space-between",children:[(0,r.jsx)(s.E,{size:"sm",c:"blue.2",fw:500,children:aE}),(0,r.jsx)(F.A,{size:20,color:"var(--mantine-color-blue-4)"})]})}),(0,r.jsx)(_.s.Group,{value:ee,color:"blue",onChange:ea,children:(0,r.jsxs)(c.Y,{gap:"md",children:[(0,r.jsx)(_.s,{value:"first",label:(0,r.jsx)(s.E,{color:"blue",children:"先手"}),color:"blue"}),(0,r.jsx)(_.s,{value:"second",label:(0,r.jsx)(s.E,{color:"blue",children:"後手"}),color:"blue"})]})})]})]}),(0,r.jsx)(m.$,{onClick:af,size:"md",variant:"gradient",gradient:{from:"blue.8",to:"blue.6"},leftSection:(0,r.jsx)(P.A,{size:16}),styles:{root:{"&[data-disabled]":{backgroundColor:"var(--mantine-color-dark-9) !important",color:"var(--mantine-color-dark-5) !important",cursor:"not-allowed"}}},children:"次ターンへ →"}),(0,r.jsx)(R,{value:a,max:10,onChange:ah,label:"ターン数"}),(0,r.jsx)(R,{value:en,max:9,onChange:e=>{ec(Math.max(e,am))},label:"相手の手札枚数",knownCount:am,knownColor:"elf"===es?"green":"cyan"}),(0,r.jsx)(R,{value:S,max:ai,onChange:e=>z(Math.min(e,ai)),label:"現在のPP（上限: ".concat(ai,"）")}),"nightmare"===es&&(0,r.jsx)(q,{value:eh,onChange:ep,label:"墓地枚数",min:0}),(0,r.jsxs)(c.Y,{wrap:"nowrap",children:["dragon"===es&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.$,{onClick:ab,size:"xs",variant:"light",color:"blue",styles:{root:{"&[data-disabled]":{backgroundColor:"var(--mantine-color-dark-9) !important",color:"var(--mantine-color-dark-5) !important",cursor:"not-allowed"}}},children:"PP上限 +1"}),(0,r.jsx)(m.$,{onClick:ax,color:"red",size:"xs",variant:"light",styles:{root:{"&[data-disabled]":{backgroundColor:"var(--mantine-color-dark-9) !important",color:"var(--mantine-color-dark-5) !important",cursor:"not-allowed"}}},children:"PP上限 -1"})]}),"second"===ee&&(0,r.jsx)(j.d,{label:(0,r.jsx)(s.E,{color:"blue",children:"エクストラPP"}),checked:1===v,color:"blue",onChange:e=>{let a=e.currentTarget.checked;M(+!!a),z(e=>Math.min(e+(a?1:-1),ai)),er(!a)}})]}),(0,r.jsxs)(k.x,{children:[(0,r.jsx)(k.x.Col,{span:6,children:(0,r.jsx)(u.Z,{withBorder:!0,padding:"md",style:{backgroundColor:"var(--mantine-color-dark-7)"},children:(0,r.jsxs)(c.Y,{gap:"xs",wrap:"nowrap",children:[(0,r.jsx)(R,{value:O,max:2,onChange:N,disabled:!ac||eo,label:"EP"}),(0,r.jsx)(m.$,{onClick:()=>{N(e=>Math.max(0,e-1)),el(!0)},disabled:0===O||eo||!ac,size:"sm",variant:"filled",color:"blue",styles:{root:{"&[data-disabled]":{backgroundColor:"var(--mantine-color-dark-9) !important",color:"var(--mantine-color-dark-5) !important",cursor:"not-allowed"}}},children:"使用"})]})})}),(0,r.jsx)(k.x.Col,{span:6,children:(0,r.jsx)(u.Z,{withBorder:!0,padding:"md",style:{backgroundColor:"var(--mantine-color-dark-7)"},children:(0,r.jsxs)(c.Y,{gap:"xs",wrap:"nowrap",children:[(0,r.jsx)(R,{value:L,max:2,onChange:K,disabled:!as||eo,label:"SEP"}),(0,r.jsx)(m.$,{onClick:()=>{K(e=>Math.max(0,e-1)),el(!0)},disabled:0===L||eo||!as,size:"sm",variant:"filled",color:"blue",styles:{root:{"&[data-disabled]":{backgroundColor:"var(--mantine-color-dark-9) !important",color:"var(--mantine-color-dark-5) !important",cursor:"not-allowed"}}},children:"使用"})]})})})]})]})}),(0,r.jsx)(u.Z,{shadow:"xl",withBorder:!0,style:{flex:1,backgroundColor:"var(--mantine-color-dark-8)",borderColor:"var(--mantine-color-blue-9)"},children:(0,r.jsxs)(y.t,{defaultValue:"removal",color:"blue",children:[(0,r.jsxs)(y.t.List,{style:{color:"white"},children:[(0,r.jsx)(y.t.Tab,{value:"removal",leftSection:(0,r.jsx)(P.A,{size:16}),style:{color:"white"},onMouseEnter:e=>e.currentTarget.style.color="black",onMouseLeave:e=>e.currentTarget.style.color="white",children:"除去カード"}),(0,r.jsx)(y.t.Tab,{value:"tokens",leftSection:(0,r.jsx)(Y.A,{size:16}),style:{color:"white"},onMouseEnter:e=>e.currentTarget.style.color="black",onMouseLeave:e=>e.currentTarget.style.color="white",children:"トークン管理"}),(0,r.jsx)(y.t.Tab,{value:"strong_moves",leftSection:(0,r.jsx)(A.A,{size:16}),style:{color:"white"},onMouseEnter:e=>e.currentTarget.style.color="black",onMouseLeave:e=>e.currentTarget.style.color="white",children:"強い動き"}),(0,r.jsx)(y.t.Tab,{value:"history",leftSection:(0,r.jsx)(Z.A,{size:16}),style:{color:"white"},onMouseEnter:e=>e.currentTarget.style.color="black",onMouseLeave:e=>e.currentTarget.style.color="white",children:"履歴"})]}),(0,r.jsx)(y.t.Panel,{value:"removal",pt:"md",children:(0,r.jsxs)(n.B,{gap:"md",children:[(0,r.jsx)(b.h,{order:3,c:"blue.3",children:"使用可能な除去カード"}),(0,r.jsx)(C.F,{h:500,children:(0,r.jsx)(c.Y,{gap:"sm",children:ad.length>0?ad.map(e=>(0,r.jsx)(X,{card:e,ppCurrent:S,ppMax:ai,onUseCard:ap,actionableEffect:e.actionableEffect},e.id)):(0,r.jsx)(s.E,{c:"blue.4",children:"現在使用可能な除去カードはありません。"})})})]})}),(0,r.jsx)(y.t.Panel,{value:"tokens",pt:"md",children:(0,r.jsxs)(n.B,{gap:"md",children:[(0,r.jsx)(b.h,{order:3,c:"blue.3",children:"トークン・特殊効果メモ"}),"elf"===es?(0,r.jsxs)(n.B,{gap:"md",children:[(0,r.jsxs)(u.Z,{withBorder:!0,style:{backgroundColor:"var(--mantine-color-dark-7)"},children:[(0,r.jsxs)(c.Y,{justify:"space-between",wrap:"nowrap",children:[(0,r.jsxs)(c.Y,{children:[(0,r.jsx)(s.E,{size:"sm",c:"blue.4",children:"フェアリー"}),(0,r.jsxs)(l.E,{color:"green",variant:"light",children:[ed,"枚"]})]}),(0,r.jsx)(i.M,{variant:"light",onClick:()=>ef(e=>!e),color:"blue",size:"md",children:em?(0,r.jsx)(B.A,{size:20}):(0,r.jsx)(T.A,{size:20})})]}),(0,r.jsx)(g.S,{in:em,children:(0,r.jsxs)(n.B,{gap:"xs",mt:"md",style:{borderTop:"1px solid var(--mantine-color-dark-5)",paddingTop:"10px"},children:[(0,r.jsx)(s.E,{size:"sm",c:"blue.4",mb:"xs",children:"フェアリーの効果:"}),(0,r.jsxs)(s.E,{size:"xs",c:"dark.3",children:["コスト: 1",(0,r.jsx)("br",{}),"攻撃力: 1",(0,r.jsx)("br",{}),"体力: 1",(0,r.jsx)("br",{}),"効果: 突進"]})]})})]}),(0,r.jsx)(R,{value:ed,max:en,onChange:e=>eu(Math.min(e,en)),label:"確定フェアリー数"})]}):"nemesis"===es?(0,r.jsxs)(n.B,{gap:"md",children:[(0,r.jsx)(s.E,{size:"sm",c:"blue.4",mb:"xs",children:"操り人形トークン"}),(0,r.jsxs)(k.x,{gutter:"xs",children:[(0,r.jsx)(k.x.Col,{span:6,children:(0,r.jsx)(V,{token:H.find(e=>"puppet"===e.id),count:eb,handleArtifactCountChange:av,handCount:en})}),(0,r.jsx)(k.x.Col,{span:6,children:(0,r.jsx)(V,{token:H.find(e=>"enhanced_puppet"===e.id),count:ek,handleArtifactCountChange:av,handCount:en})})]}),(0,r.jsx)(s.E,{size:"sm",c:"blue.4",mb:"xs",mt:"md",children:"コア・アーティファクト"}),(0,r.jsxs)(k.x,{gutter:"xs",children:[(0,r.jsx)(k.x.Col,{span:6,children:(0,r.jsx)(V,{token:H.find(e=>"past_core"===e.id),count:ev,handleArtifactCountChange:av,handCount:en})}),(0,r.jsx)(k.x.Col,{span:6,children:(0,r.jsx)(V,{token:H.find(e=>"future_core"===e.id),count:ej,handleArtifactCountChange:av,handCount:en})}),(0,r.jsx)(k.x.Col,{span:6,children:(0,r.jsx)(V,{token:H.find(e=>"castle_artifact"===e.id),count:eC,handleArtifactCountChange:av,handCount:en})}),(0,r.jsx)(k.x.Col,{span:6,children:(0,r.jsx)(V,{token:H.find(e=>"attack_artifact"===e.id),count:eE,handleArtifactCountChange:av,handCount:en})}),(0,r.jsx)(k.x.Col,{span:4,children:(0,r.jsx)(V,{token:H.find(e=>"destroy_artifact_alpha"===e.id),count:eS,handleArtifactCountChange:av,handCount:en})}),(0,r.jsx)(k.x.Col,{span:4,children:(0,r.jsx)(V,{token:H.find(e=>"destroy_artifact_beta"===e.id),count:eO,handleArtifactCountChange:av,handCount:en})}),(0,r.jsx)(k.x.Col,{span:4,children:(0,r.jsx)(V,{token:H.find(e=>"destroy_artifact_gamma"===e.id),count:eT,handleArtifactCountChange:av,handCount:en})}),(0,r.jsx)(k.x.Col,{span:12,children:(0,r.jsx)(V,{token:H.find(e=>"exceed_artifact_omega"===e.id),count:eU,handleArtifactCountChange:av,handCount:en})})]}),(0,r.jsx)(b.h,{order:4,c:"blue.3",mt:"md",children:"アーティファクト合成"}),(0,r.jsxs)(c.Y,{grow:!0,children:[(0,r.jsx)(m.$,{onClick:()=>aj("castle_artifact"),disabled:!(ev>=2||ev>=1&&ej>=1),size:"sm",variant:"gradient",gradient:{from:"teal.8",to:"teal.6"},leftSection:(0,r.jsx)($.A,{size:16}),styles:{root:{"&[data-disabled]":{backgroundColor:"var(--mantine-color-dark-9) !important",color:"var(--mantine-color-dark-5) !important",cursor:"not-allowed"}}},children:"キャッスル合成"}),(0,r.jsx)(m.$,{onClick:()=>aj("attack_artifact"),disabled:!(ej>=2||ev>=1&&ej>=1),size:"sm",variant:"gradient",gradient:{from:"teal.8",to:"teal.6"},leftSection:(0,r.jsx)($.A,{size:16}),styles:{root:{"&[data-disabled]":{backgroundColor:"var(--mantine-color-dark-9) !important",color:"var(--mantine-color-dark-5) !important",cursor:"not-allowed"}}},children:"アタック合成"})]}),(0,r.jsxs)(c.Y,{grow:!0,children:[(0,r.jsx)(m.$,{onClick:()=>aj("destroy_artifact_alpha"),disabled:!((eC||0)+(eE||0)>=1&&(eb||0)+(ek||0)+(ev||0)+(ej||0)>=1),size:"sm",variant:"gradient",gradient:{from:"orange.8",to:"orange.6"},leftSection:(0,r.jsx)($.A,{size:16}),styles:{root:{"&[data-disabled]":{backgroundColor:"var(--mantine-color-dark-9) !important",color:"var(--mantine-color-dark-5) !important",cursor:"not-allowed"}}},children:"デストロイα合成"}),(0,r.jsx)(m.$,{onClick:()=>aj("destroy_artifact_beta"),disabled:!((eC||0)+(eE||0)>=1&&(eb||0)+(ek||0)+(ev||0)+(ej||0)>=2),size:"sm",variant:"gradient",gradient:{from:"orange.8",to:"orange.6"},leftSection:(0,r.jsx)($.A,{size:16}),styles:{root:{"&[data-disabled]":{backgroundColor:"var(--mantine-color-dark-9) !important",color:"var(--mantine-color-dark-5) !important",cursor:"not-allowed"}}},children:"デストロイβ合成"}),(0,r.jsx)(m.$,{onClick:()=>aj("destroy_artifact_gamma"),disabled:!(eC>=2||eE>=2||eC>=1&&eE>=1||(eC||0)+(eE||0)>=1&&(eS||0)+(eO||0)+(eT||0)>=1),size:"sm",variant:"gradient",gradient:{from:"orange.8",to:"orange.6"},leftSection:(0,r.jsx)($.A,{size:16}),styles:{root:{"&[data-disabled]":{backgroundColor:"var(--mantine-color-dark-9) !important",color:"var(--mantine-color-dark-5) !important",cursor:"not-allowed"}}},children:"デストロイγ合成"})]}),(0,r.jsx)(m.$,{onClick:()=>aj("exceed_artifact_omega"),disabled:!((eS||0)>=1&&(eO||0)>=1&&(eT||0)>=1),size:"sm",variant:"gradient",gradient:{from:"grape.8",to:"grape.6"},leftSection:(0,r.jsx)($.A,{size:16}),styles:{root:{"&[data-disabled]":{backgroundColor:"var(--mantine-color-dark-9) !important",color:"var(--mantine-color-dark-5) !important",cursor:"not-allowed"}}},children:"イクシードΩ合成"})]}):(0,r.jsx)(s.E,{c:"blue.4",children:"このクラスには特定のトークン管理機能はありません。"}),(0,r.jsx)(w.T,{placeholder:"生成されたトークンや特殊効果について記録...",value:e2,onChange:e=>e3(e.currentTarget.value),minRows:4,maxRows:10,autosize:!0,styles:{input:{backgroundColor:"var(--mantine-color-dark-7)",color:"var(--mantine-color-blue-2)",border:"1px solid var(--mantine-color-dark-4)"}}})]})}),(0,r.jsx)(y.t.Panel,{value:"strong_moves",pt:"md",children:(0,r.jsxs)(n.B,{gap:"md",children:[(0,r.jsx)(b.h,{order:3,c:"blue.3",children:"相手の強い動き"}),au.length>0?au.map((e,a)=>(0,r.jsx)(u.Z,{withBorder:!0,p:"md",style:{backgroundColor:"var(--mantine-color-dark-7)"},children:(0,r.jsxs)(c.Y,{justify:"space-between",children:[(0,r.jsxs)(s.E,{size:"sm",c:"blue.4",children:["T",e.turn,": ",e.move]}),(0,r.jsx)(Q,{threat:e.threat})]})},a)):(0,r.jsx)(s.E,{c:"blue.4",children:"このリーダーの強い動きはまだ記録されていません。"})]})}),(0,r.jsx)(y.t.Panel,{value:"history",pt:"md",children:(0,r.jsxs)(n.B,{gap:"md",children:[(0,r.jsx)(b.h,{order:3,c:"blue.3",children:"ゲーム履歴"}),(0,r.jsx)(C.F,{h:500,children:(0,r.jsx)(n.B,{gap:"xs",children:e6.slice(-20).reverse().map((e,a)=>(0,r.jsx)(u.Z,{withBorder:!0,p:"xs",style:{backgroundColor:"var(--mantine-color-dark-7)"},children:(0,r.jsxs)(c.Y,{justify:"space-between",children:[(0,r.jsxs)(s.E,{size:"sm",c:"blue.4",children:["T",e.turn,": ",e.action]}),(0,r.jsxs)(s.E,{size:"xs",c:"dark.3",children:["PP:",e.pp," 手札:",e.hand]})]})},a))})})]})})]})})]}),(0,r.jsx)(p.a,{opened:e4,onClose:()=>e7(!1),title:(0,r.jsx)(b.h,{order:3,c:"blue.3",children:"リーダーを選択"}),centered:!0,overlayProps:{backgroundOpacity:.55,blur:3},styles:{content:{backgroundColor:"var(--mantine-color-dark-8)",borderColor:"var(--mantine-color-blue-9)"},header:{backgroundColor:"var(--mantine-color-dark-8)",borderBottom:"1px solid var(--mantine-color-dark-6)"},title:{color:"var(--mantine-color-blue-3)"},close:{color:"var(--mantine-color-blue-3)"}},children:(0,r.jsx)(k.x,{gutter:"md",children:I.map(e=>(0,r.jsx)(k.x.Col,{span:6,children:(0,r.jsx)(u.Z,{shadow:"sm",withBorder:!0,p:"md",onClick:()=>{ei(e.value),an(),e7(!1)},style:{cursor:"pointer",backgroundColor:e.value===es?"var(--mantine-color-blue-9)":"var(--mantine-color-dark-7)",borderColor:e.value===es?"var(--mantine-color-blue-7)":"var(--mantine-color-dark-5)",textAlign:"center",transition:"background-color 0.2s, border-color 0.2s","&:hover":{backgroundColor:e.value===es?"var(--mantine-color-blue-8)":"var(--mantine-color-dark-6)"}},children:(0,r.jsx)(s.E,{size:"lg",fw:700,c:e.value===es?"white":"blue.2",children:e.label})})},e.value))})}),(0,r.jsx)(p.a,{opened:e9,onClose:()=>{e8(!1),ar({}),al("")},title:(0,r.jsx)(b.h,{order:3,c:"blue.3",children:"素材を選択して合成"}),centered:!0,overlayProps:{backgroundOpacity:.55,blur:3},styles:{content:{backgroundColor:"var(--mantine-color-dark-8)",borderColor:"var(--mantine-color-blue-9)"},header:{backgroundColor:"var(--mantine-color-dark-8)",borderBottom:"1px solid var(--mantine-color-dark-6)"},title:{color:"var(--mantine-color-blue-3)"},close:{color:"var(--mantine-color-blue-3)"}},children:(0,r.jsxs)(n.B,{gap:"md",children:[(0,r.jsxs)(s.E,{c:"blue.4",children:["合成対象: ",null==(e=H.find(e=>e.id===ae))?void 0:e.name]}),ao&&(0,r.jsxs)(s.E,{c:"red.5",size:"sm",mt:"xs",children:["エラー: ",ao]}),"castle_artifact"===ae&&(0,r.jsxs)(n.B,{children:[(0,r.jsx)(s.E,{c:"blue.4",children:"合成素材:"}),(0,r.jsx)(_.s.Group,{value:2===at.past_core&&1===Object.keys(at).length?"past_core_x2":1===at.past_core&&1===at.future_core&&2===Object.keys(at).length?"past_future_x1":"",onChange:e=>{"past_core_x2"===e?ar({past_core:2}):"past_future_x1"===e&&ar({past_core:1,future_core:1})},children:(0,r.jsxs)(n.B,{children:[(0,r.jsx)(u.Z,{withBorder:!0,p:"xs",style:{backgroundColor:"var(--mantine-color-dark-7)"},children:(0,r.jsx)(_.s,{value:"past_core_x2",label:"パスト・コア 2枚 (".concat(ev,"枚所持)"),disabled:ev<2,styles:{label:{color:"var(--mantine-color-blue-1)"},radio:{"&[data-checked]":{backgroundColor:"var(--mantine-color-blue-6)"},"&[data-disabled]":{borderColor:"var(--mantine-color-dark-5)",backgroundColor:"var(--mantine-color-dark-7)"}}}})}),(0,r.jsx)(u.Z,{withBorder:!0,p:"xs",style:{backgroundColor:"var(--mantine-color-dark-7)"},children:(0,r.jsx)(_.s,{value:"past_future_x1",label:"パスト・コア 1枚とフューチャー・コア 1枚 (".concat(ev,"枚/ ").concat(ej,"枚所持)"),disabled:!(ev>=1&&ej>=1),styles:{label:{color:"var(--mantine-color-blue-1)"},radio:{"&[data-checked]":{backgroundColor:"var(--mantine-color-blue-6)"},"&[data-disabled]":{borderColor:"var(--mantine-color-dark-5)",backgroundColor:"var(--mantine-color-dark-7)"}}}})})]})})]}),"attack_artifact"===ae&&(0,r.jsxs)(n.B,{children:[(0,r.jsx)(s.E,{c:"blue.4",children:"合成素材:"}),(0,r.jsx)(_.s.Group,{value:2===at.future_core&&1===Object.keys(at).length?"future_core_x2":1===at.past_core&&1===at.future_core&&2===Object.keys(at).length?"past_future_x1":"",onChange:e=>{"future_core_x2"===e?ar({future_core:2}):"past_future_x1"===e&&ar({past_core:1,future_core:1})},children:(0,r.jsxs)(n.B,{children:[(0,r.jsx)(u.Z,{withBorder:!0,p:"xs",style:{backgroundColor:"var(--mantine-color-dark-7)"},children:(0,r.jsx)(_.s,{value:"future_core_x2",label:"フューチャー・コア 2枚 (".concat(ej,"枚所持)"),disabled:ej<2,styles:{label:{color:"var(--mantine-color-blue-1)"},radio:{"&[data-checked]":{backgroundColor:"var(--mantine-color-blue-6)"},"&[data-disabled]":{borderColor:"var(--mantine-color-dark-5)",backgroundColor:"var(--mantine-color-dark-7)"}}}})}),(0,r.jsx)(u.Z,{withBorder:!0,p:"xs",style:{backgroundColor:"var(--mantine-color-dark-7)"},children:(0,r.jsx)(_.s,{value:"past_future_x1",label:"パスト・コア 1枚とフューチャー・コア 1枚 (".concat(ev,"枚/ ").concat(ej,"枚所持)"),disabled:!(ev>=1&&ej>=1),styles:{label:{color:"var(--mantine-color-blue-1)"},radio:{"&[data-checked]":{backgroundColor:"var(--mantine-color-blue-6)"},"&[data-disabled]":{borderColor:"var(--mantine-color-dark-5)",backgroundColor:"var(--mantine-color-dark-7)"}}}})})]})})]}),"destroy_artifact_alpha"===ae&&(0,r.jsxs)(n.B,{children:[(0,r.jsx)(s.E,{c:"blue.4",children:"3コストのアーティファクト (1枚):"}),(0,r.jsx)(_.s.Group,{value:Object.keys(at).find(e=>["castle_artifact","attack_artifact"].includes(e))||"",onChange:e=>{ar(a=>{let t={};e&&(t[e]=1);let r=Object.keys(a).find(e=>["puppet","enhanced_puppet","past_core","future_core"].includes(e));return r&&(t[r]=a[r]),t})},children:(0,r.jsx)(c.Y,{children:aC.filter(e=>["castle_artifact","attack_artifact"].includes(e.id)).map(e=>(0,r.jsx)(u.Z,{withBorder:!0,p:"xs",style:{backgroundColor:"var(--mantine-color-dark-7)",flex:1},children:(0,r.jsx)(_.s,{value:e.id,label:"".concat(e.name," (").concat(e.currentCount,"枚)"),disabled:0===e.currentCount,styles:{label:{color:"var(--mantine-color-blue-1)"},radio:{"&[data-checked]":{backgroundColor:"var(--mantine-color-blue-6)"},"&[data-disabled]":{borderColor:"var(--mantine-color-dark-5)",backgroundColor:"var(--mantine-color-dark-7)"}}}})},e.id))})}),(0,r.jsx)(s.E,{c:"blue.4",mt:"md",children:"1コストのアーティファクト (1枚):"}),(0,r.jsx)(_.s.Group,{value:Object.keys(at).find(e=>["puppet","enhanced_puppet","past_core","future_core"].includes(e))||"",onChange:e=>{ar(a=>{let t={};e&&(t[e]=1);let r=Object.keys(a).find(e=>["castle_artifact","attack_artifact"].includes(e));return r&&(t[r]=a[r]),t})},children:(0,r.jsx)(k.x,{children:aC.filter(e=>["puppet","enhanced_puppet","past_core","future_core"].includes(e.id)).map(e=>(0,r.jsx)(k.x.Col,{span:6,children:(0,r.jsx)(u.Z,{withBorder:!0,p:"xs",style:{backgroundColor:"var(--mantine-color-dark-7)",flex:1},children:(0,r.jsx)(_.s,{value:e.id,label:"".concat(e.name," (").concat(e.currentCount,"枚)"),disabled:0===e.currentCount,styles:{label:{color:"var(--mantine-color-blue-1)"},radio:{"&[data-checked]":{backgroundColor:"var(--mantine-color-blue-6)"},"&[data-disabled]":{borderColor:"var(--mantine-color-dark-5)",backgroundColor:"var(--mantine-color-dark-7)"}}}})})},e.id))})})]}),"destroy_artifact_beta"===ae&&(0,r.jsxs)(n.B,{children:[(0,r.jsx)(s.E,{c:"blue.4",children:"3コストのアーティファクト (1枚):"}),(0,r.jsx)(_.s.Group,{value:Object.keys(at).find(e=>["castle_artifact","attack_artifact"].includes(e))||"",onChange:e=>{ar(a=>{let t={};return e&&(t[e]=1),Object.keys(a).filter(e=>["puppet","enhanced_puppet","past_core","future_core"].includes(e)).forEach(e=>t[e]=a[e]),t})},children:(0,r.jsx)(c.Y,{children:aC.filter(e=>["castle_artifact","attack_artifact"].includes(e.id)).map(e=>(0,r.jsx)(u.Z,{withBorder:!0,p:"xs",style:{backgroundColor:"var(--mantine-color-dark-7)",flex:1},children:(0,r.jsx)(_.s,{value:e.id,label:"".concat(e.name," (").concat(e.currentCount,"枚)"),disabled:0===e.currentCount,styles:{label:{color:"var(--mantine-color-blue-1)"},radio:{"&[data-checked]":{backgroundColor:"var(--mantine-color-blue-6)"},"&[data-disabled]":{borderColor:"var(--mantine-color-dark-5)",backgroundColor:"var(--mantine-color-dark-7)"}}}})},e.id))})}),(0,r.jsx)(s.E,{c:"blue.4",mt:"md",children:"1コストのアーティファクト (2枚):"}),(0,r.jsx)(_.s.Group,{value:JSON.stringify(Object.keys(at).filter(e=>["puppet","enhanced_puppet","past_core","future_core"].includes(e)).sort())||"",onChange:e=>{let a=JSON.parse(e);ar(e=>{let t={},r=Object.keys(e).find(e=>["castle_artifact","attack_artifact"].includes(e));return r&&(t[r]=e[r]),a.forEach(e=>{t[e]=(t[e]||0)+1}),t})},children:(0,r.jsx)(k.x,{children:aw().map(e=>(0,r.jsx)(k.x.Col,{span:6,children:(0,r.jsx)(u.Z,{withBorder:!0,p:"xs",style:{backgroundColor:"var(--mantine-color-dark-7)",flex:1},children:(0,r.jsx)(_.s,{value:JSON.stringify(e.materials),label:e.name,styles:{label:{color:"var(--mantine-color-blue-1)"},radio:{"&[data-checked]":{backgroundColor:"var(--mantine-color-blue-6)"},"&[data-disabled]":{borderColor:"var(--mantine-color-dark-5)",backgroundColor:"var(--mantine-color-dark-7)"}}}})})},e.id))})})]}),"destroy_artifact_gamma"===ae&&(0,r.jsxs)(n.B,{children:[(0,r.jsx)(s.E,{c:"blue.4",children:"3コストのアーティファクト (1枚):"}),(0,r.jsx)(_.s.Group,{value:Object.keys(at).find(e=>["castle_artifact","attack_artifact"].includes(e))||"",onChange:e=>{ar(a=>{let t={};e&&(t[e]=1);let r=Object.keys(a).find(e=>{var a,t;return!["castle_artifact","attack_artifact"].includes(e)&&((null==(a=H.find(a=>a.id===e))?void 0:a.cost)===3||(null==(t=H.find(a=>a.id===e))?void 0:t.cost)===5)});return r&&r!==e&&(t[r]=a[r]),t})},children:(0,r.jsx)(c.Y,{children:aC.filter(e=>["castle_artifact","attack_artifact"].includes(e.id)).map(e=>(0,r.jsx)(u.Z,{withBorder:!0,p:"xs",style:{backgroundColor:"var(--mantine-color-dark-7)",flex:1},children:(0,r.jsx)(_.s,{value:e.id,label:"".concat(e.name," (").concat(e.currentCount,"枚)"),disabled:0===e.currentCount,styles:{label:{color:"var(--mantine-color-blue-1)"},radio:{"&[data-checked]":{backgroundColor:"var(--mantine-color-blue-6)"},"&[data-disabled]":{borderColor:"var(--mantine-color-dark-5)",backgroundColor:"var(--mantine-color-dark-7)"}}}})},e.id))})}),(0,r.jsx)(s.E,{c:"blue.4",mt:"md",children:"3コストまたは5コストのアーティファクト (1枚):"}),(0,r.jsx)(_.s.Group,{value:Object.keys(at).find(e=>["castle_artifact","attack_artifact","destroy_artifact_alpha","destroy_artifact_beta","destroy_artifact_gamma"].includes(e)&&e!==Object.keys(at).find(e=>["castle_artifact","attack_artifact"].includes(e)&&1===at[e]))||"",onChange:e=>{ar(a=>{let t={},r=Object.keys(a).find(e=>["castle_artifact","attack_artifact"].includes(e));return r&&(t[r]=a[r]),e&&(t[e]=1),t})},children:(0,r.jsx)(k.x,{children:aC.filter(e=>["castle_artifact","attack_artifact","destroy_artifact_alpha","destroy_artifact_beta","destroy_artifact_gamma"].includes(e.id)&&(Object.keys(at).find(e=>["castle_artifact","attack_artifact"].includes(e))!==e.id||1!==at[e.id])).map(e=>{let a=0===e.currentCount;return(0,r.jsx)(k.x.Col,{span:6,children:(0,r.jsx)(u.Z,{withBorder:!0,p:"xs",style:{backgroundColor:"var(--mantine-color-dark-7)",flex:1},children:(0,r.jsx)(_.s,{value:e.id,label:"".concat(e.name," (").concat(e.currentCount,"枚)"),disabled:a,styles:{label:{color:"var(--mantine-color-blue-1)"},radio:{"&[data-checked]":{backgroundColor:"var(--mantine-color-blue-6)"},"&[data-disabled]":{borderColor:"var(--mantine-color-dark-5)",backgroundColor:"var(--mantine-color-dark-7)"}}}})})},e.id)})})})]}),"exceed_artifact_omega"===ae&&(0,r.jsxs)(n.B,{children:[(0,r.jsx)(s.E,{c:"blue.4",mb:"md",children:"デストロイアーティファクトα、β、γをそれぞれ1枚ずつ消費します。"}),(0,r.jsx)(k.x,{children:aC.filter(e=>["destroy_artifact_alpha","destroy_artifact_beta","destroy_artifact_gamma"].includes(e.id)).map(e=>(0,r.jsx)(k.x.Col,{span:6,children:(0,r.jsx)(u.Z,{withBorder:!0,p:"xs",style:{backgroundColor:"var(--mantine-color-dark-7)",flex:1},children:(0,r.jsx)(E.S,{checked:(at[e.id]||0)>0,onChange:a=>ay(e.id,a.currentTarget.checked),label:"".concat(e.name," (").concat(e.currentCount,"枚)"),disabled:0===e.currentCount,styles:{label:{color:"var(--mantine-color-blue-1)"},input:{"&[data-checked]":{backgroundColor:"var(--mantine-color-blue-6)"},"&[data-disabled]":{borderColor:"var(--mantine-color-dark-5)",backgroundColor:"var(--mantine-color-dark-7)"}}}})})},e.id))})]}),(0,r.jsx)(m.$,{onClick:()=>a_(at,ae),disabled:0===Object.keys(at).length||"castle_artifact"===ae&&(2!==at.past_core||1!==Object.keys(at).length)&&(1!==at.past_core||1!==at.future_core||2!==Object.keys(at).length)||"attack_artifact"===ae&&(2!==at.future_core||1!==Object.keys(at).length)&&(1!==at.past_core||1!==at.future_core||2!==Object.keys(at).length)||"destroy_artifact_alpha"===ae&&!(Object.keys(at).some(e=>["castle_artifact","attack_artifact"].includes(e))&&Object.keys(at).some(e=>["puppet","enhanced_puppet","past_core","future_core"].includes(e))&&2===Object.keys(at).length)||"destroy_artifact_beta"===ae&&!(Object.keys(at).some(e=>["castle_artifact","attack_artifact"].includes(e))&&2===Object.keys(at).filter(e=>["puppet","enhanced_puppet","past_core","future_core"].includes(e)).reduce((e,a)=>e+(at[a]||0),0)&&Object.keys(at).length>=2)||"destroy_artifact_gamma"===ae&&!(Object.keys(at).some(e=>["castle_artifact","attack_artifact"].includes(e))&&Object.keys(at).some(e=>{var a,t;return e!==Object.keys(at).find(e=>["castle_artifact","attack_artifact"].includes(e))&&((null==(a=H.find(a=>a.id===e))?void 0:a.cost)===3||(null==(t=H.find(a=>a.id===e))?void 0:t.cost)===5)})&&2===Object.keys(at).length)||"exceed_artifact_omega"===ae&&(1!==(at.destroy_artifact_alpha||0)||1!==(at.destroy_artifact_beta||0)||1!==(at.destroy_artifact_gamma||0)||3!==Object.keys(at).length),size:"md",variant:"gradient",gradient:{from:"blue.8",to:"blue.6"},styles:{root:{"&[data-disabled]":{backgroundColor:"var(--mantine-color-dark-9) !important",color:"var(--mantine-color-dark-5) !important",cursor:"not-allowed"}}},children:"合成実行"})]})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[701,43,241,490,213,821,636,593,792],()=>a(2332)),_N_E=e.O()}]);